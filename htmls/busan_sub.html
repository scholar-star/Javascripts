<!DOCTYPE html>
<html>
    <head>
        <title>근처 지하철역 찾기</title>
        <meta charset="utf-8">
    </head>
    <body>
        <h1>현재 위치의 구와 동을 입력하세요.</h1>
        <hr>
        <form>
            부산광역시 
            <input type="text" name="distinct" id="distinct" placeholder="구/군">
            <input type="text" name="unit" id="unit" placeholder="동/면">
            <button onclick="getOn()" type="submit">제출</button>
            <!--button으로 form에 대한 제출 가능(type submit)-->
        </form>
        <table id="stations"></table>
        <script>
            function getOn() {
                var xhr = new XMLHttpRequest();
                xhr.addEventListener("readystatechange", function() {
                    if(this.readyState === 4) {
                        console.log(this.responseText);
                    }
                });
                const params = new URLSearchParams();
                params.append('distinct', document.getElementById("distinct").value);
                params.append('unit', document.getElementById("unit").value);
                xhr.open("GET", "http://localhost:3000/subway?"+params.toString());
                xhr.send();
                
                const requestOptions = {
                    method: "GET",
                    redirect: "follow"
                };

                // fetch("http://localhost:3000/subway?"+params.toString(), requestOptions)
                // .then((response) => response.text())
                // .then((result) => console.log(result))
                // .catch((error) => console.error(error));

                if(xhr.status == 200) {
                    console.log(xhr.responseText);
                }
            }
        </script>
    </body>
</html>